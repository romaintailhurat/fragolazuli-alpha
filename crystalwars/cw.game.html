<!DOCTYPE html>
<html>

<head>
	<title>C R Y S T A L    W A R S</title>
	<style type="text/css">
	@import url(http://fonts.googleapis.com/css?family=Della+Respira);

	h1 {
		font-family: 'Della Respira', serif;
	}

	</style>

	<!-- GOOGLE WEBSOCKET API -->
	<script type="text/javascript" src="/_ah/channel/jsapi"></script>
	<!-- JQUERY 2.x-->
	<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
	<!-- MAIN SCRIPT -->
	<script type="text/javascript">
	// TODO put that in another file


	$(document).ready(function() {

		console.log('ready');

		channel = new goog.appengine.Channel('{{token}}');
	    socket = channel.open();
	    socket.onopen = function() {
	    	console.log('Socket is opened');
	    };
	    socket.onmessage = function(data) {
	    	console.log('A message received from the server via the channel');
	    	console.log('Data was : ' + data);
	    };
	    socket.onerror = function() {
	    	console.log('There was a com error with the channel');
	    };
	    socket.onclose = function() {
	    	console.log('Socket just closed');
	    };
		

		$('#test').click(function() {
			console.log('click');
		});
	});

	</script>
</head>

<body>

	<h1>C R Y S T A L  W A R S</h1>
	<h2>Game {{ id }}  </h2>
	<p>with token {{ token }}</p>
	<button id="test">SEND</button>

</body>

</html>